@page
@model IndexModel
@{
    ViewData["Title"] = "Startseite";
}

@section Scripts
{
    <!-- Load the main entry point which will import all other modules -->
    <script type="module" src="js/main.js" asp-append-version="true"></script>
}

<div class="container">
    <h1 class="display-4">Fluglärm Beschwerde erstellen</h1>
    <h2>1 Störungen aufzeichnen</h2>
    <p>
        Verwende den Button, um die Uhrzeit einer Störung zu speichern.
        Später kannst Du die eingetragenen Ereignisse als Sammelbeschwerde
        melden.
    </p>
    <p>
        <button id="record-button" class="btn btn-primary">Zeitpunkt einer Störung merken</button>
    </p>
    <ul id="events">
    </ul>

    <h2>2 Beschwerde vorbereiten</h2>

    <p>
        Deine aktuelle Position wird benötigt, um die nächstgelegene DFLD Messstation zu ermitteln.
    </p>

    <p>
        <button id="locate-button" class="btn btn-primary">Meine Position ermitteln</button>
    </p>

    <div id="manual-measurement-station-search-instructions">
        <p>
            <span id="position-error">Bitte klicke auf "Meine Position ermitteln".</span>
        </p>

        <p>
            Du kannst die nächstgelegene Messstation unter
            <a href="https://www.dfld.de/Mess/Language/MessR001.php" target="_blank">DFLD Regionsauswahl</a>
            selbst heraussuchen.
        </p>
    </div>

    <div id="next-measurement-station-info" hidden="hidden">
        <p>
            Anhand Deiner Position <span id="position"></span>wurde die Region
            <a href="@Html.DisplayFor(model => model.Region.MeasurementStationSelectionUrl)"
               target="_blank">
                @Html.DisplayFor(model => model.Region.Name)</a>
            und
            <a href="@Html.DisplayFor(model => model.MeasurementStation.NoiseGraphUrl)"
               target="_blank">
                @Html.DisplayFor(model => model.MeasurementStation.Name)</a>
            als nächstgelegene Messstation ermittelt.
        </p>

        <p>
            Falls Deine Position fehlerhaft ist, kannst Du die nächstgelegene Messstation unter
            <a href="https://www.dfld.de/Mess/Language/MessR001.php" target="_blank">DFLD Regionsauswahl</a>
            selbst heraussuchen.
        </p>
    </div>

    <p>
        Öffne nun das Diagramm der Messstation und führe die folgenden Schritte durch, um die oben aufgenommenen
        Störungen in eine Beschwerde zu übertragen:
    </p>

    <ol>
        <li>Klicke auf den die Spitze des Ereignisses im Diagramm - Das Diagramm wird nun an dieser Stelle vergrößert.
        </li>
        <li>Klicke erneut auf den die Spitze des Ereignisses im vergrößerten Diagramm.</li>
    </ol>

    <p>
        Es poppt ein Fenster mit Titel
        "Beschwerde" auf. Dort wird die Uhrzeit und der Schallpegel der Störung eingetragen. Dieses Fenster bleibt
        geöffnet und nimmt alle weiteren Ereignisse auf.
    </p>

    <p>
        Wiederhole beiden Schritte, um alle Störungen in das Beschwerde-Fenster einzutragen.
    </p>

    <h3>3 Beschwerde absenden</h3>
    <p>
        Klicke auf <b>Fluglärmbeschwerde versenden</b>, um Deine Beschwerde fertigzustellen und abzusenden.
    </p>

    <h3>Weitere Informationen</h3>
    <p>
        Der <a href="https://www.dfld.de/" target="_blank">Deutsche Fluglärmdienst e.V. (DFLD)</a> bietet unter anderem
        folgende Dokumentation an:
    </p>

    <ul>
        <li><a href="https://www.dfld.de/Mess/Language/MessHelpG.html" target="_blank">Erläuterungen zu den
                Lärm-Messungen</a></li>
        <li><a href="https://www.dfld.de/Mess/Language/BeschHelpG.html" target="_blank">Hilfe zur Fluglärmbeschwerde</a>
        </li>
    </ul>

    <h3>Ereignisse automatisch zur Beschwerde hinzufügen</h3>

    <div class="alert alert-info show">
        Dieser Abschnitt befindet sich gerade in der Entwicklung. Das heißt, dass die Funktionen unterhalb dieser
        Nachricht noch nicht fertig programmiert sind.
    </div>

    <p>
        Klicke auf "Schallpegel abrufen", um zu jeder Störung den Schallpegel zu ermitteln.
    </p>

    <p>
        <button id="get-noise-button" class="btn btn-primary">Schallpegel abrufen</button>
    </p>
    
    <ul id="noise-levels">
    </ul>
</div>
